"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4842],{4840:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>a});var i=r(4848),l=r(8453);const t={sidebar_position:3},o="Compile, Run and Deploy",s={id:"Build/Compile and Run",title:"Compile, Run and Deploy",description:"This guide walks you through compiling and running Bitlayer.",source:"@site/docs/Build/Compile and Run.md",sourceDirName:"Build",slug:"/Build/Compile and Run",permalink:"/docs/Build/Compile and Run",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docs",previous:{title:"Quick Start Guide",permalink:"/docs/Build/QuickStart"},next:{title:"Bitlayer PoS",permalink:"/docs/category/bitlayer-pos"}},d={},a=[{value:"Download",id:"download",level:2},{value:"Install Golang",id:"install-golang",level:2},{value:"Compile",id:"compile",level:2},{value:"Run",id:"run",level:2},{value:"Deployment",id:"deployment",level:2},{value:"Hardware",id:"hardware",level:3},{value:"Minimum",id:"minimum",level:4},{value:"Recommended",id:"recommended",level:4},{value:"Network &amp; Port",id:"network--port",level:4},{value:"Chain Node",id:"chain-node",level:3},{value:"Start Bash",id:"start-bash",level:3},{value:"systemd config",id:"systemd-config",level:3}];function c(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"compile-run-and-deploy",children:"Compile, Run and Deploy"}),"\n",(0,i.jsx)(e.p,{children:"This guide walks you through compiling and running Bitlayer."}),"\n",(0,i.jsx)(e.h2,{id:"download",children:"Download"}),"\n",(0,i.jsx)(e.p,{children:"Download the Bitlayer source code using the following git command:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"git clone https://github.com/bitlayer-org/bitlayer-l2.git\n"})}),"\n",(0,i.jsx)(e.h2,{id:"install-golang",children:"Install Golang"}),"\n",(0,i.jsxs)(e.p,{children:["Before compiling Bitlayer, make sure you have Golang installed on your system. Refer to the official Golang website (",(0,i.jsx)(e.a,{href:"https://go.dev/dl/",children:"https://go.dev/dl/"}),") for download and installation instructions."]}),"\n",(0,i.jsx)(e.h2,{id:"compile",children:"Compile"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Navigate to the directory where you cloned the Bitlayer source code using:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cd /path/to/bitlayer-l2\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Compile Bitlayer by running the following command:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"make geth\n"})}),"\n",(0,i.jsxs)(e.p,{children:["This will create a compiled binary in the ",(0,i.jsx)(e.code,{children:"build/bin"})," folder."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"run",children:"Run"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Get a list of available options and their descriptions by running:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"./build/bin/geth --help\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Refer to the ",(0,i.jsx)(e.a,{href:"https://geth.ethereum.org/docs/fundamentals/command-line-options",children:"Command-line Options documentation"})," for specific usage details."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Custom Option:"})}),"\n",(0,i.jsxs)(e.p,{children:["Bitlayer offers a custom option named ",(0,i.jsx)(e.code,{children:"--traceaction"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"--traceaction value     (default: 0)\r\n    Trace internal tx call/create/suicide action, 0=no trace, 1=trace only native token > 0, 2=trace all\n"})}),"\n",(0,i.jsx)(e.p,{children:"This option allows you to enable or disable custom JSON-RPC methods for tracing internal transactions."}),"\n",(0,i.jsx)(e.h2,{id:"deployment",children:"Deployment"}),"\n",(0,i.jsx)(e.p,{children:"Introduce systemd management configs."}),"\n",(0,i.jsx)(e.h3,{id:"hardware",children:"Hardware"}),"\n",(0,i.jsx)(e.h4,{id:"minimum",children:"Minimum"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"8core\r\n16g\r\nssd iops>5k\n"})}),"\n",(0,i.jsx)(e.h4,{id:"recommended",children:"Recommended"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"16core\r\n32g\r\nssd iops>5k\n"})}),"\n",(0,i.jsx)(e.h4,{id:"network--port",children:"Network & Port"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"External IP Address\r\nPort TCP/UDP 31031\n"})}),"\n",(0,i.jsx)(e.h3,{id:"chain-node",children:"Chain Node"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"config.toml"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'[Eth]\r\nSyncMode = "snap"\r\nTrieCleanCacheRejournal= 300000000000\r\nTrieTimeout = 20000000000\r\n\r\n\r\n[Eth.Miner]\r\nGasFloor = 40000000\r\nGasCeil = 40000000\r\nGasPrice = 100000000\r\nRecommit = 3000000000\r\n\r\n\r\n[Eth.TxPool]\r\nNoLocals = true\r\nJournal = "transactions.rlp"\r\nRejournal = 600000000000\r\nPriceLimit = 100000000\r\nPriceBump = 10\r\nAccountSlots = 64\r\nGlobalSlots = 10240\r\nAccountQueue = 32\r\nGlobalQueue = 1024\r\nLifetime = 1800000000000\r\n\r\n[Node]\r\nDataDir = "/data/bitlayer-l2/chain/data"\r\nInsecureUnlockAllowed = true\r\nNoUSB = true\r\nIPCPath = "geth.ipc"\r\nHTTPHost = "0.0.0.0"\r\nHTTPPort = 8545\r\nHTTPCors = ["*"]\r\nHTTPVirtualHosts = ["*"]\r\nHTTPModules = [\'eth\', \'net\', \'web3\']\r\n\r\nWSHost = "0.0.0.0"\r\nWSPort = 8546\r\nWSModules = [\'eth\', \'net\', \'web3\']\r\n\r\nGraphQLVirtualHosts = ["localhost"]\r\n\r\n\r\n[Node.P2P]\r\nMaxPeers = 50\r\nNoDiscovery = false\r\nListenAddr = ":31031"\r\nEnableMsgEvents = false\r\n\r\n[Node.HTTPTimeouts]\r\nReadTimeout = 30000000000\r\nWriteTimeout = 30000000000\r\nIdleTimeout = 120000000000\n'})}),"\n",(0,i.jsx)(e.p,{children:"use snap sync in the config, if full needed - change this line"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'SyncMode = "snap"\n'})}),"\n",(0,i.jsx)(e.p,{children:"to"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'SyncMode = "full"\n'})}),"\n",(0,i.jsx)(e.h3,{id:"start-bash",children:"Start Bash"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["To show full detail help info of all flags, type ",(0,i.jsx)(e.code,{children:"geth help"})," or ",(0,i.jsx)(e.code,{children:"geth -h"})]}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"run.sh"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"#!/usr/bin/env bash\r\n/data/bitlayer-l2/chain/geth-linux-amd64 \\\r\n--config /data/bitlayer-l2/chain/config.toml  \\\r\n--log.file /data/bitlayer-l2/chain/logs/chain.log \\\r\n--log.rotate=true \\\r\n--authrpc.port 8445 \\\r\n--traceaction 2 \\\r\n--verbosity 3 \n"})}),"\n",(0,i.jsx)(e.p,{children:"if you need to use it as archive node, add:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"--syncmode full \\\r\n--gcmode archive \\\n"})}),"\n",(0,i.jsx)(e.p,{children:"so:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"#!/usr/bin/env bash\r\n/data/bitlayer-l2/chain/geth-linux-amd64 \\\r\n--config /data/bitlayer-l2/chain/config.toml  \\\r\n--log.file /data/bitlayer-l2/chain/logs/chain.log \\\r\n--log.rotate=true \\\r\n--authrpc.port 8445 \\\r\n--traceaction 2 \\\r\n--syncmode full \\\r\n--gcmode archive \\\r\n--verbosity 3  \n"})}),"\n",(0,i.jsx)(e.p,{children:"If no network flags were provided, the node will connect the bitlayer mainnet by default. If you want to connect to bitlayer testnet, add:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"--testnet\n"})}),"\n",(0,i.jsx)(e.h3,{id:"systemd-config",children:"systemd config"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"[Unit]\r\nDescription=bitlayer-l2 chain service\r\n\r\n[Service]\r\nType=simple\r\nExecStart=/bin/sh /data/bitlayer-l2/chain/run.sh\r\nWorkingDirectory=/data/bitlayer-l2/chain\r\nTimeoutSec=600\r\nRestart=on-failure\r\nRestartSec=5s\r\n\r\nLimitNOFILE=65536\r\n\r\n[Install]\r\nWantedBy=multi-user.target\n"})})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>s});var i=r(6540);const l={},t=i.createContext(l);function o(n){const e=i.useContext(t);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:o(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);